steps:
  - name: "gcr.io/cloud-builders/npm:current"
    args:
      ["ci"]
  # デプロイ
  - name: "gcr.io/cloud-builders/gcloud"
    args: ["functions", "deploy", "${_FUNCTION_NAME}", "--trigger-topic", "${_TOPIC_ID}", "--region=asia-northeast1", "--max-instances", "1", "--source=.", "--stage-bucket=dotya-download-functions-sources", "--entry-point=helloPubSub"]

options:
  logging: "CLOUD_LOGGING_ONLY"
